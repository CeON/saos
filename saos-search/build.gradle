
def loadProperties(String sourceFileName) {
    def config = new Properties()
    def propFile = file(sourceFileName)
    if (propFile.canRead()) {
        config.load(new FileInputStream(propFile))
        for (Map.Entry property in config) {
            project.ext[property.key] = property.value;
        }
    }
}

loadProperties(System.getProperty('user.home') + '/.icm/saos.gradle.local.properties');

dependencies {
    compile lib.'org.springframework:spring-context'
    compile lib.'org.springframework.batch:spring-batch-core'
    compile lib.'org.apache.solr:solr-solrj'
    
    compile project(':saos-persistence')
}


task initSolrConfig(type: Copy) {
    from 'src/main/resources/pl/edu/icm/saos/search/config'
    into this.properties['saos.solr.configuration.home']
}

processResources.dependsOn initSolrConfig
